# Alpine Linux mit curl und postgresql-client f端r Datenbank-Maintenance
FROM alpine:3.19

# Installiere notwendige Pakete
RUN apk --no-cache add curl postgresql-client bash

# Erstelle Verzeichnis f端r Scripts
WORKDIR /app

# Kopiere die Scripts
COPY cleanup-script.sh /app/cleanup-script.sh
COPY start.sh /app/start.sh

# Mache Scripts ausf端hrbar
RUN chmod +x /app/cleanup-script.sh /app/start.sh

# Aktiviere Logging
RUN mkdir -p /var/log
RUN touch /var/log/poll-cleanup.log

# Starte 端ber das Startup-Script
CMD ["/app/start.sh"]